"0","library(tidyverse)"
"0","library(MRIcloudT1volumetrics)"
"0","roiDir = paste0(getwd(),'/data')"
"0","fileList = dir(roiDir)"
"0","#type = 1, level = 1"
"0","# dat = dat %>% mutate(volume_demean = volume - mean(volume))%>% select(roi,volume_demean)%>% spread(roi,volume_demean)"
"0","dat = c()"
"0","dat = list()"
"0","for (i in 1:length(fileList)){"
"0","  fullPath = paste(roiDir, fileList[i], sep = ""/"")"
"0","  raw_dat = readSubject(fullPath) %>% subject2df()"
"0","  dat_type1 = raw_dat %>% filter(type ==1)"
"0","  # unique(dat_type1$level"
"0","  for (j in 1:4){"
"0","    dat_each = dat_type1 %>% filter(level == j) %>% select(rawid,roi,volume) %>% spread(roi,volume)"
"0","    dat[[paste0('level',j)]] = rbind(dat[[paste0('level',j)]],dat_each)"
"0","  }"
"0","  # dat_each = raw_dat %>% filter(type == 1, level == 1) %>% select(roi,volume) %>% spread(roi,volume)"
"0","  # dat = rbind(dat,dat_each)"
"0","}"
"0","#extract rawid (integer)"
"0","for (j in 1:4){"
"0","  id = dat[[paste0('level',j)]]$rawid"
"0","  dat[[paste0('level',j)]]$rawid = as.numeric(sapply(strsplit(id,""_""),function(x) x[1]))"
"0","}"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
